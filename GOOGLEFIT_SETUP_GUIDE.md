# ğŸš€ Google Fit Real Integration Setup Guide\n\n**Status**: âœ… **REAL INTEGRATION IMPLEMENTED**\n\n---\n\n## Overview\n\nYour Health Monitor app now includes **real Google Fit integration** that securely syncs your actual health data from Google Fit.\n\n### What's New\n\nâœ… **Real OAuth 2.0 Authentication** - Secure login with your Google account\nâœ… **Actual Health Data Sync** - Real steps, sleep, and heart rate from Google Fit\nâœ… **Auto-Sync Feature** - Automatically refresh every 30 minutes\nâœ… **Token Management** - Secure storage of access tokens\nâœ… **Disconnect Option** - Revoke access anytime\n\n---\n\n## Prerequisites\n\n### Required\n- Node.js v14+ installed\n- npm installed\n- Google account\n- Google Cloud Project (free to create)\n\n### Optional\n- Smartwatch or fitness device synced to Google Fit\n- Recent health data in Google Fit\n\n---\n\n## Setup Steps\n\n### Step 1: Create Google Cloud Project\n\n1. Go to **Google Cloud Console**: https://console.cloud.google.com\n\n2. **Create a new project**:\n   - Click \"Select a Project\" (top left)\n   - Click \"New Project\"\n   - Name: `Health Monitor`\n   - Click \"Create\"\n\n3. **Wait for project to be created** (30 seconds)\n\n### Step 2: Enable Google Fit API\n\n1. In Google Cloud Console, search for **\"Google Fit API\"**\n\n2. Click on \"Google Fit API\"\n\n3. Click the **\"Enable\"** button\n\n4. Wait for API to be enabled (30 seconds)\n\n### Step 3: Create OAuth 2.0 Credentials\n\n1. In the left sidebar, click **\"Credentials\"**\n\n2. Click **\"+ Create Credentials\"** button\n\n3. Select **\"OAuth client ID\"**\n\n4. If prompted, configure consent screen:\n   - Click \"Configure Consent Screen\"\n   - Choose **\"External\"** user type\n   - Click \"Create\"\n   - Fill in:\n     - **App name**: Health Monitor\n     - **User support email**: your-email@gmail.com\n     - **Developer contact**: your-email@gmail.com\n   - Click \"Save and Continue\"\n   - Skip scopes (click \"Save and Continue\")\n   - Add test user (your email)\n   - Click \"Save and Continue\"\n\n5. **Back to Create Credentials**:\n   - Application type: **\"Web application\"**\n   - Name: Health Monitor\n   - Under \"Authorized redirect URIs\":\n     - Click \"+ Add URI\"\n     - Enter: `http://localhost:5000/api/google-fit/callback`\n   - Click \"Create\"\n\n6. **Copy Your Credentials**:\n   - A popup will show your credentials\n   - Copy the **Client ID** (save it)\n   - Copy the **Client Secret** (save it)\n\n### Step 4: Configure Your App\n\n1. In your project directory, create a `.env` file:\n   \n   ```bash\n   # Windows PowerShell\n   echo \"GOOGLE_CLIENT_ID=YOUR_CLIENT_ID\" > .env\n   echo \"GOOGLE_CLIENT_SECRET=YOUR_CLIENT_SECRET\" >> .env\n   echo \"GOOGLE_REDIRECT_URI=http://localhost:5000/api/google-fit/callback\" >> .env\n   echo \"PORT=5000\" >> .env\n   ```\n\n2. **Replace the placeholders**:\n   - Replace `YOUR_CLIENT_ID` with your actual Client ID\n   - Replace `YOUR_CLIENT_SECRET` with your actual Client Secret\n\n3. **Verify the `.env` file** looks like:\n   ```\n   GOOGLE_CLIENT_ID=123456789-abcdefg.apps.googleusercontent.com\n   GOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxx\n   GOOGLE_REDIRECT_URI=http://localhost:5000/api/google-fit/callback\n   PORT=5000\n   ```\n\n### Step 5: Install Dependencies\n\n```bash\ncd c:\\Users\\vinutha.gowde\\workspace\\healthMoniter\nnpm install\n```\n\nThis will install:\n- `googleapis` - Google APIs\n- `google-auth-library` - OAuth handling\n- `express-session` - Session management\n- `dotenv` - Environment configuration\n\n### Step 6: Start the Server\n\n```bash\nnpm start\n```\n\nYou should see:\n```\nHealth Monitor Server running on http://localhost:5000\nâœ… Google Fit Integration Enabled\n```\n\n### Step 7: Test the Integration\n\n1. **Open your browser**: http://localhost:5000\n\n2. **Register** with your name, email, phone\n\n3. **Dashboard opens** - Look for the **\"Phone Sync\"** section\n\n4. **Click** \"ğŸ”— Connect Google Fit\"\n\n5. **You'll be redirected** to Google's login page\n\n6. **Sign in** with your Google account that has Google Fit data\n\n7. **Grant permissions** - Click \"Allow\" to give access to:\n   - Read activity data\n   - Read sleep data\n   - Read nutrition data\n\n8. **Automatic redirect** back to your app\n\n9. **See synced data** on your dashboard!\n\n---\n\n## How It Works\n\n### OAuth 2.0 Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Your App  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Google     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   You    â”‚\nâ”‚  (Frontend) â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (OAuth)     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ (Browser)â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n      â”‚                        â”‚                      â”‚\n      â”‚ 1. Click Connect       â”‚ 2. Redirect to      â”‚\n      â”‚                        â”‚    Login             â”‚\n      â”‚                        â”‚                      â”‚\n      â”‚    3. Login & Approve             â”‚\n      â”‚                        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n      â”‚                        â”‚\n      â”‚    4. Return Code      â”‚\n      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n      â”‚\n      â”‚ 5. Exchange Code for Token\n      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶\n      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n      â”‚ 6. Use Token to Get Health Data\n      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶\n      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n      â”‚ 7. Display Data\n      â”‚\n      âœ… Done!\n```\n\n### Data Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Your Google Account â”‚\nâ”‚   (Health Data)      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â”‚\n           â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Google Fit API     â”‚\nâ”‚   (Steps, Sleep,     â”‚\nâ”‚    Heart Rate)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â”‚\n           â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Your Backend Server â”‚\nâ”‚  (Node.js + Express) â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â”‚\n           â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Your Browser        â”‚\nâ”‚  (Dashboard)         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## API Endpoints\n\n### New Google Fit Endpoints\n\n#### 1. Get Authorization URL\n```\nGET /api/google-fit/auth-url\n\nResponse:\n{\n  \"success\": true,\n  \"authUrl\": \"https://accounts.google.com/o/oauth2/v2/auth?...\"\n}\n```\n\n#### 2. OAuth Callback\n```\nGET /api/google-fit/callback?code=AUTH_CODE&state=STATE\n\nRedirects to: /dashboard?googleFitConnected=true\n```\n\n#### 3. Check Authentication\n```\nGET /api/google-fit/check-auth/:userId\n\nResponse:\n{\n  \"success\": true,\n  \"authenticated\": true\n}\n```\n\n#### 4. Sync Health Data\n```\nGET /api/google-fit/sync/:userId\n\nResponse:\n{\n  \"success\": true,\n  \"data\": {\n    \"walkingHours\": 1.5,\n    \"sleepHours\": 7.2,\n    \"steps\": 6000,\n    \"avgHeartRate\": 72,\n    \"syncedAt\": \"2026-02-10T15:30:00Z\"\n  }\n}\n```\n\n#### 5. Disconnect Google Fit\n```\nPOST /api/google-fit/disconnect/:userId\n\nResponse:\n{\n  \"success\": true,\n  \"message\": \"Google Fit access revoked successfully\"\n}\n```\n\n---\n\n## File Structure\n\n### New/Modified Files\n\n```\nhealthMoniter/\nâ”œâ”€â”€ server/\nâ”‚   â”œâ”€â”€ app.js                    # âœï¸ Updated - Added Google Fit endpoints\nâ”‚   â””â”€â”€ google-fit-service.js     # ğŸ†• New - Google Fit integration logic\nâ”œâ”€â”€ public/\nâ”‚   â”œâ”€â”€ script.js                 # âœï¸ Updated - Real Google Fit functions\nâ”‚   â””â”€â”€ index.html                # No changes\nâ”œâ”€â”€ package.json                  # âœï¸ Updated - Added googleapis, dotenv\nâ”œâ”€â”€ .env.example                  # ğŸ†• New - Configuration template\nâ”œâ”€â”€ .env                          # ğŸ†• New (created by you) - Your credentials\nâ””â”€â”€ data/\n    â””â”€â”€ tokens/                   # ğŸ†• New - Stores encrypted tokens\n```\n\n---\n\n## Troubleshooting\n\n### Issue: \"Invalid Client ID\"\n\n**Problem**: Error when connecting to Google Fit\n\n**Solution**:\n1. Verify `.env` file has correct credentials\n2. Check Client ID doesn't have extra spaces\n3. Verify API is enabled in Google Cloud Console\n4. Restart server: `npm start`\n\n### Issue: \"Redirect URI Mismatch\"\n\n**Problem**: \"redirect_uri_mismatch\" error\n\n**Solution**:\n1. Go to Google Cloud Console\n2. Go to Credentials\n3. Click your OAuth 2.0 Client ID\n4. Verify redirect URI is exactly:\n   ```\n   http://localhost:5000/api/google-fit/callback\n   ```\n5. No trailing slash!\n\n### Issue: \"Invalid Grant\"\n\n**Problem**: Can't exchange code for token\n\n**Solution**:\n1. Check that Client Secret is correct in `.env`\n2. Wait a few minutes after creating credentials\n3. Delete `.env` and create fresh\n4. Restart server\n\n### Issue: No Data Syncing\n\n**Problem**: Click connect but no health data appears\n\n**Solution**:\n1. **Make sure you have Google Fit data**:\n   - Install Google Fit app on your phone\n   - Sync a fitness tracker or smartwatch\n   - Go to https://fit.google.com and check if data is there\n   \n2. **Check browser console** (F12 â†’ Console):\n   - Look for error messages\n   - Screenshot and save error\n   \n3. **Check server logs**:\n   - Look in terminal where `npm start` is running\n   - Copy any error messages\n\n4. **Try manual sync**:\n   - Use \"Manual Entry\" to test app works\n   - Then try Google Fit again\n\n### Issue: \"Not authenticated\"\n\n**Problem**: Syncing fails with \"Not authenticated\" message\n\n**Solution**:\n1. Click \"ğŸ”Œ Disconnect\" button\n2. Click \"ğŸ”— Connect Google Fit\" again\n3. Go through authorization flow again\n4. Make sure you click \"Allow\" on permissions screen\n\n---\n\n## Usage\n\n### Daily Sync\n\n1. **Dashboard opens** - You'll see Google Fit status\n\n2. **Click \"ğŸ”„ Sync Now\"** to sync latest data\n\n3. **Data updates** in real-time on your metrics\n\n4. **Health score** recalculates automatically\n\n### Auto-Sync\n\nData automatically syncs every 30 minutes (you don't need to do anything)\n\n### Manual Disconnect\n\n1. **Click \"ğŸ”Œ Disconnect\"** button\n2. **Confirm** you want to disconnect\n3. **Access revoked** - Google Fit won't sync anymore\n\n---\n\n## Security Notes\n\nâœ… **Secure by Default**:\n- OAuth 2.0 - Industry standard security\n- Access tokens stored locally in `/data/tokens/`\n- Refresh tokens for long-term access\n- Tokens never exposed to frontend\n- User never gives app their password\n\nâš ï¸ **Production Deployment**:\n- Move `.env` to secure environment variable manager\n- Use HTTPS instead of HTTP\n- Implement token encryption\n- Add rate limiting to API endpoints\n- Use secure token storage (database)\n- Audit token access logs\n\n---\n\n## What Data Is Synced\n\n### From Google Fit\n- âœ… **Step Count** â†’ Converted to Walking Hours\n- âœ… **Sleep Data** â†’ Sleep Hours\n- âœ… **Heart Rate** â†’ Average BPM\n- âœ… **Activity Data** â†’ Exercise metrics\n- âœ… **Nutrition** â†’ (Ready for future)\n\n### Data Update Frequency\n- Real-time: Manual sync button\n- Auto-sync: Every 30 minutes\n- Manual Entry: Whenever you enter data\n\n---\n\n## Next Steps\n\n### Enhance Your App\n\n1. **Add more Google Fit metrics**:\n   - Distance traveled\n   - Calories burned\n   - Active minutes\n   - Weight tracking\n\n2. **Add more data sources**:\n   - Samsung Health (similar setup)\n   - Apple HealthKit (for iOS)\n   - Fitbit API\n   - Garmin API\n\n3. **Advanced features**:\n   - Historical data charts\n   - Trend analysis\n   - Goal tracking\n   - Social sharing\n   - Notifications for milestones\n\n---\n\n## Testing Checklist\n\n- [ ] `.env` file created with valid credentials\n- [ ] `npm install` completed successfully\n- [ ] Server starts with: `npm start`\n- [ ] Can navigate to http://localhost:5000\n- [ ] Can register account\n- [ ] Dashboard loads\n- [ ] \"Connect Google Fit\" button works\n- [ ] OAuth flow redirects to Google login\n- [ ] Can authenticate with Google account\n- [ ] Redirect back to app works\n- [ ] Health data syncs and displays\n- [ ] Metrics update on dashboard\n- [ ] Health score recalculates\n- [ ] Can disconnect and reconnect\n\n---\n\n## Support\n\n### Common Issues\n- See **Troubleshooting** section above\n- Check browser console (F12) for errors\n- Check server terminal for backend errors\n- Verify `.env` file has correct format\n\n### Documentation\n- [Google Fit API Docs](https://developers.google.com/fit/rest)\n- [Google OAuth 2.0 Flow](https://developers.google.com/identity/protocols/oauth2)\n- [Express.js Documentation](https://expressjs.com)\n\n---\n\n**Status**: âœ… Ready to Deploy\n\n**Last Updated**: February 10, 2026\n